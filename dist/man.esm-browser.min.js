const w=window,d=document,arg_qselall="querySelectorAll",qselall=d[arg_qselall].bind(d),[el_html]=qselall("html"),class_node=Node,class_element=Element,class_list=NodeList,def=(t,e,n)=>{Object.defineProperty(t,e,{value:n})},parseInt=w.parseInt,createNodeList=t=>{t instanceof Set==!1&&(t=new Set(t)),t=[...t];const e=d.createDocumentFragment().childNodes,n={};for(const e in t)n[e]={value:t[e],enumerable:!0};return n.length={value:t.length},n.item={value:function(t){return this[+t||0]},enumerable:!0},Object.create(e,n)},parseHTML=t=>{const e=d.createElement("div");e.innerHTML=t;for(const t of e.$find("script")){const e=d.createElement("script");{const n=t.$attrAll();for(const t in n)e.$attr(t,n[t])}e.innerHTML=t.innerHTML,t.$replaceWith(e)}return e.childNodes.$freeze()},addToSet=(t,...e)=>{for(const n of e)t.add(n)},parseOnArgs=(t,...e)=>{const n=new Set(t.split(" "));let s=null,o=null,i={};if("function"==typeof e[0]?[o,i]=e:"string"==typeof e[0]&&"function"==typeof e[1]&&([s,o,i]=e),null===o)throw new Error("Invalid arguments.");return{events:n,selector:s,callback_given:o,options:i}},pel={},plist={},pwin={};{const t=(t,e)=>void 0===e||(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e),e=(t,e=0)=>{const n=[];Array.isArray(t[0])&&(t=t[0]);for(const s of t)s instanceof class_element||s instanceof class_node?n.push(s):s instanceof class_list?n.push(...s):"string"==typeof s&&("<"===s[0]?n.push(...parseHTML(s)):1===e?n.push(d.createTextNode(s)):n.push(...qselall(s)));return n},n=t=>t.replace(/-([a-z])/,(t,e)=>e.toUpperCase());{plist.is=function(e){return!!this[0]&&t(this[0],e)},plist.add=function(...t){return createNodeList([...this,...e(t)])};const n=(e,n,s=!0)=>{const o=[];for(const i of e)t(i,n)===s&&o.push(i);return createNodeList(o)};plist.filter=function(t){return n(this,t)},plist.not=function(t){return n(this,t,!1)}}{pel.find=function(t){return this[arg_qselall](t)},plist.find=function(t){const e=[];for(const n of this)e.push(...n[arg_qselall](t));return createNodeList(e)},plist.childs=plist.children=function(e){const n=void 0!==e,s=[];for(const o of this)if(n)for(const n of o.children)t(n,e)&&s.push(n);else s.push(...o.children);return createNodeList(s)};const e=(n,s,o={})=>{const{until:i=null,recursive:r=!0}=o,l=new Set,c=n.parentNode;return c&&c!==d&&(null!==i&&t(c,i)||(t(c,s)&&l.add(c),r&&addToSet(l,...e(c,s,o)))),l};plist.parent=function(t){const n=new Set;for(const s of this)addToSet(n,...e(s,t,{recursive:!1}));return createNodeList(n)},plist.parents=function(t){const n=new Set;for(const s of this)addToSet(n,...e(s,t));return createNodeList(n)},plist.parentsUntil=function(t,n){const s=new Set;for(const o of this)addToSet(s,...e(o,n,{until:t}));return createNodeList(s)};const n=(e,n,s={})=>{const o=[];for(;null!=(e=e[(!0===s.prev?"previous":"next")+"ElementSibling"])&&(void 0!==n&&!t(e,n)||(o.push(e),!0!==s.one)););return o};plist.next=function(t){const e=[];for(const s of this){const o=n(s,t,{one:!0});o.length>0&&e.push(o[0])}return createNodeList(e)},plist.nextAll=function(t){const e=[];for(const s of this){const o=n(s,t);e.push(...o)}return createNodeList(e)},plist.prev=function(t){const e=[];for(const s of this){const o=n(s,t,{prev:!0,one:!0});o.length>0&&e.push(o[0])}return createNodeList(e)},plist.prevAll=function(t){const e=[];for(const s of this){const o=n(s,t,{prev:!0});e.push(...o)}return createNodeList(e)},plist.siblings=function(e){const n=new Set;for(const s of this)for(const o of s.parentNode.children)o===s||void 0!==e&&!t(o,e)||n.add(o);return createNodeList(n)},plist.index=function(){return this[0]?this[0].$prevAll().length:null},plist.contains=function(t){return!!this[0]&&null!==this[0].querySelector(t)}}{{const t=[(t,e)=>{t.appendChild(e)},(t,e)=>{t.insertBefore(e,t.firstChild)},(t,e)=>{t.parentNode.insertBefore(e,t)},(e,n)=>{const s=e.parentNode,o=e.nextSibling;o?s.insertBefore(n,o):t[0](s,n)}],n=(n,s,o,i=0)=>{const r=t[n];o=e(o,+!i);const l=createNodeList(s),c=[];for(const t of l){c[i]=t;for(const t of o)c[+!i]=t,r(...c)}return l};plist.append=function(...t){return n(0,this,t)},plist.appendTo=function(...t){return n(0,this,t,1)},plist.prepend=function(...t){return n(1,this,t)},plist.prependTo=function(...t){return n(1,this,t,1)},plist.before=function(...t){return n(2,this,t)},plist.insertBefore=function(...t){return n(2,this,t,1)},plist.after=function(...t){return n(3,this,t)},plist.insertAfter=function(...t){return n(3,this,t,1)},plist.replaceWith=function(t){if("string"==typeof t)for(const e of this)e.outerHTML=t;else if(t instanceof class_element||t instanceof class_list)return n(3,this,[t]),this.$detach();return this}}const t=t=>t.parentNode.removeChild(t);pel.detach=pel.remove=function(){return t(this)},plist.detach=plist.remove=function(){const e=[];for(const n of this)e.push(t(n));return createNodeList(e)},pel.clone=function(){return this.cloneNode(!0)},plist.clone=function(){const t=[];for(const e of this)t.push(e.cloneNode(!0));return createNodeList(t)}}{const t=t=>t?t.clientWidth:void 0;plist.width=function(){const e=this[0];if(!e)return;const n=getComputedStyle(e);return t(e)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)},plist.innerWidth=function(){return t(this[0])},plist.outerWidth=function(t){const e=this[0];if(!e)return;let n=e.offsetWidth;if(!0===t){const t=getComputedStyle(e);n+=parseInt(t.marginLeft)+parseInt(t.marginRight)}return n};const e=t=>t?t.clientHeight:void 0;plist.height=function(){const t=this[0];if(!t)return;const n=getComputedStyle(t);return e(t)-parseInt(n.paddingTop)-parseInt(n.paddingBottom)},plist.innerHeight=function(){return e(this[0])},plist.outerHeight=function(t){const e=this[0];if(!e)return;let n=e.offsetHeight;if(!0===t){const t=getComputedStyle(e);n+=parseInt(t.marginTop)+parseInt(t.marginBottom)}return n},plist.offset=function(){if(!this[0])return;const t=this[0].getBoundingClientRect();return{top:t.top+d.body.scrollTop,left:t.left+d.body.scrollLeft}},plist.position=function(){const t=this[0];if(t)return{left:t.offsetLeft,top:t.offsetTop}}}plist.html=function(...t){if(0===t.length)return this.length>0?this[0].innerHTML:void 0;for(const e of this)e.innerHTML=t[0];return this},plist.text=function(...t){if(0===t.length)return this.length>0?this[0].textContent:void 0;for(const e of this)e.textContent=t[0];return this},plist.empty=function(){for(const t of this)t.innerHTML="";return this},plist.classAdd=plist.addClass=function(...t){for(const e of this)e.classList.add(...t);return this},plist.classRemove=plist.removeClass=function(...t){for(const e of this)e.classList.remove(...t);return this},plist.classAdded=plist.hasClass=function(t){return!!this[0]&&this[0].classList.contains(t)},plist.css=function(...t){let e=null;if(1===t.length){if(null!==t[0]&&"object"==typeof t[0])e=t[0];else if("string"==typeof t[0])return getComputedStyle(this[0])[t[0]]}else 2===t.length&&"string"==typeof t[0]&&(e={[t[0]]:t[1]});if(null===e)throw new Error("Invalid arguments.");for(const t in e){let s=e[t];"number"==typeof s&&(s+="px");const o=n(t);for(const t of this)t.style[o]=s}return this},plist.hide=function(){for(const t of this)t.style.display="none";return this},plist.unhide=function(){for(const t of this)t.style.display="";return this};{const t=(t,e)=>t.hasAttribute(e)?t.getAttribute(e):null;plist.attr=function(...e){let n={};if(e[0]instanceof Object)n=e[0];else{if("string"!=typeof e[0])throw 0;{const[s,o]=e;if(1===e.length)return this.length>0?t(this[0],s):null;n[s]=o}}for(const t of this)for(const e in n)t.setAttribute(e,n[e]);return this},plist.attrAll=function(){const e=this[0],n={};for(const s of e.getAttributeNames()){const o=t(e,s);o&&(n[s]=o)}return n},plist.attrRemove=plist.removeAttr=function(t){for(const e of this)e.removeAttribute(t);return this},plist.prop=function(...t){const[e,n]=t;if(1===t.length)return this.length>0?this[0][e]:void 0;for(const t of this)t[e]=n;return this};{const t="$_datastorage";plist.data=function(...e){let s={};if(e[0]instanceof Object)s=e[0];else{if("string"!=typeof e[0])throw 0;{const[o,i]=e;if(1===e.length)return this.length>0&&this[0][t]?this[0][t].get(n(o)):void 0;s[o]=i}}for(const e of this){e[t]||(e[t]=new Map);for(const o in s)e[t].set(n(o),s[o])}return this},plist.dataRemove=plist.removeData=function(e){for(const n of this)n[t]&&n[t].delete(e);return this}}plist.value=plist.val=function(...t){if(0===t.length)return this.length>0?this[0].value:void 0;for(const e of this)e.value=t[0];return this}}{const e=new Map,n=(o,i,r)=>{const{events:l,selector:c,callback_given:f,options:u={}}=parseOnArgs(...r);let a=null;"off"===o?(a=e.get(f),e.delete(f)):a=function(e){if(null===c)f.call(this,e);else{const n=new Set;t(e.target,c)&&n.add(e.target);for(const t of e.target.$parents(c))n.add(t);for(const t of n)f.call(t,e,{currentTarget:t})}"one"===o&&n("off",i,r)},e.set(f,a);return s(i,"off"===o?"remove":"add",l,a,u),i},s=(t,e,n,s,o)=>{for(const i of t)for(const t of n)i[e+"EventListener"](t,s,o)};pwin.on=function(...t){return n("on",this,t)},pwin.one=function(...t){return n("one",this,t)},pwin.off=function(...t){return n("off",this,t)};const o=(()=>{try{return new Event("load"),new CustomEvent("a"),!0}catch(t){return!1}})(),i=new Set(Object.keys(HTMLElement.prototype).filter(t=>"on"===t.substr(0,2)).map(t=>t.substr(2))),r=(t,e={},n={})=>{const s=i.has(t.toLowerCase()),{bubbles:r=!0,cancelable:l=!0}=n;let c;return s?o?c=new Event(t,{bubbles:r,cancelable:l}):(c=d.createEvent("HTMLEvents"),c.initEvent(t,r,l)):o?c=new CustomEvent(t,{bubbles:r,cancelable:l,detail:e}):(c=d.createEvent("CustomEvent"),c.initCustomEvent(t,r,l,e)),c};pwin.trigger=function(t,e){const n=r(t,e);for(const t of this)t.dispatchEvent(n)}}plist.freeze=function(){return createNodeList(this)}}const $man=t=>{if("string"==typeof t)return"<"===(t=t.trim())[0]?parseHTML(t):qselall(t);if("function"==typeof t)(d.attachEvent?"complete"===d.readyState:"loading"!==d.readyState)?t():d.addEventListener("DOMContentLoaded",t);else{if(t instanceof class_element)return createNodeList([t]);if(t instanceof class_list)return t}},def_man=(t,e)=>{Object.defineProperty($man,t,{get:e})};def_man("parseHTML",()=>parseHTML),def_man("head",()=>d.head),def_man("body",()=>d.body);const addMethod=(t,e,n,s)=>{t="$"+t,e=e||s,n||(n=function(...t){return e.apply(createNodeList([this]),t)}),def(class_element.prototype,t,n),def($man,t,n.bind(el_html)),def(class_list.prototype,t,e),s&&(def(w,t,n.bind(w)),def(d,t,n.bind(d)))};for(const t in plist)addMethod(t,plist[t],pel[t]);for(const t in pwin)addMethod(t,plist[t],pel[t],pwin[t]);def_man("extend",()=>(t,e,n)=>{addMethod(t,e,n)});{const t=(t,e)=>t&&t.$is?t.$is(e)?t:t.$parents(e)[0]:void 0,e=(e,n,...s)=>{const{selector:o,callback_given:i,options:r}=parseOnArgs("",...s),l=e=>{const n=t(e.target,o),s=t(e.relatedTarget,o);n&&n!==s&&i(e)};for(const t of e)t.addEventListener("mouse"+n,l,r);return e};addMethod("onmouseenter",(function(...t){return e(this,"over",...t)})),addMethod("onmouseleave",(function(...t){return e(this,"out",...t)}))}export default $man;
